{"version":3,"sources":["../src/index.js"],"names":[],"mappings":";;AAAA;;;;;;AAEA,OAAO,OAAP,GAAiB;AACf,WAAS;AACP,aAAS;AACP,UADO,gBACD,IADC,EACK;AACV,YAAI,KAAK,+BAAT,EAA0C;AACxC;AACD;;AAED,YAAI,mBAAmB,KAAvB;AACA,YAAI,iBAAiB,KAArB;AACA,aAAK,GAAL,CAAS,MAAT,EAAiB,OAAjB,CAAyB,UAAC,IAAD,EAAU;AACjC,cAAI,KAAK,0BAAL,EAAJ,EAAuC;AACrC,+BAAmB,IAAnB;AACA;AACD;AACD,cAAI,KAAK,wBAAL,EAAJ,EAAqC;;AAEnC,gBAAM,aAAa,KAAK,GAAL,CAAS,aAAT,EAAwB,SAAxB,CAAkC,UAArD;AACA,gBAAM,6BAA6B,WAAW,MAAX,KAAsB,CAAtB,IAA2B,WAAW,CAAX,EAAc,QAAd,CAAuB,IAAvB,KAAgC,SAA9F;AACA,gBAAI,0BAAJ,EAAgC;AAC9B,iCAAmB,IAAnB;AACD,aAFD,MAEO;AACL,+BAAiB,IAAjB;AACD;AACD;AACD;AACF,SAhBD;;AAkBA,YAAI,oBAAoB,CAAC,cAAzB,EAAyC;AACvC,cAAM,WAAW,EAAjB;AACA,mBAAS,IAAT,CAAc,6BAAc,qCAAd,GAAd;;AAEA,eAAK,aAAL,CAAmB,MAAnB,EAA2B,QAA3B;AACD;;AAED,aAAK,+BAAL,GAAuC,IAAvC;AACD;AAlCM;AADF;AADM,CAAjB","file":"index.js","sourcesContent":["import babelTemplate from 'babel-template'\n\nmodule.exports = {\n  visitor: {\n    Program: {\n      exit (path) {\n        if (path.BABEL_PLUGIN_ADD_MODULE_EXPORTS) {\n          return\n        }\n\n        let hasExportDefault = false\n        let hasExportNamed = false\n        path.get('body').forEach((path) => {\n          if (path.isExportDefaultDeclaration()) {\n            hasExportDefault = true\n            return\n          }\n          if (path.isExportNamedDeclaration()) {\n            // HACK detect export-from statements for default\n            const specifiers = path.get('declaration').container.specifiers\n            const isDefaultExportDeclaration = specifiers.length === 1 && specifiers[0].exported.name === 'default'\n            if (isDefaultExportDeclaration) {\n              hasExportDefault = true\n            } else {\n              hasExportNamed = true\n            }\n            return\n          }\n        })\n\n        if (hasExportDefault && !hasExportNamed) {\n          const topNodes = []\n          topNodes.push(babelTemplate(\"module.exports = exports['default']\")())\n\n          path.pushContainer('body', topNodes)\n        }\n\n        path.BABEL_PLUGIN_ADD_MODULE_EXPORTS = true\n      }\n    }\n  }\n}\n"]}